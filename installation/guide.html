<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIXFIRST + PIXZEN</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
        pre{background:rgb(253, 240, 211);}
        body{margin-bottom: 50vh;}
    </style>
</head>

<body>            
    <div class="col-lg-2 bg-dark text-white" style="height: 100vh;position: fixed;overflow-y: scroll;padding-left: 1rem;">
                <p></p>
                <h3>PixFirst P1</h3>
                <h6>Python==2.7.16 <br>
                    django-admin==1.11.29 <br>
                    pip==20.3.4 <br>
                    node v10.19.0 <br>
                    npm v6.13.4
                </h6>
                <hr>
                <h3>pixzen P2</h3>
                <h6>Python==3.7.16 <br>
                    django-admin==2.2.4 <br>
                    pip==22.0.4 <br>
                    node v18.13.0 <br>
                    npm v8.19.3
                </h6>
                <hr>
                author: <a href="https://github.com/sasban9" target="_blank">@sasban9</a>
                
            </div>
    <div class="container">
        <div class="row">

            <div class="col-lg-9 offset-lg-3">
                <h3><br><br> ## APT INSTALLS </h3>
                <pre>
    sudo apt-get install libjpeg62 libjpeg62-dev libjasper-runtime libjasper-dev
    sudo apt-get install libmagickwand-dev imagemagick exiv2 python-pyexiv2</pre>
                <code>sudo apt-get install gettext sysstat python-lxml libxml2-dev libxslt-dev xvfb 
        lxml==2.3 python-mysqldb python-dev python-m2crypto libmysqlclient-dev 
        awscli erlang rabbitmq-server</code>
<br><br>
<B>## pyenv</B>
<pre>
curl https://pyenv.run | bash

# Load pyenv automatically by adding
# the following to ~/.bashrc:

export PATH="/root/.pyenv/bin:$PATH"
eval "$(pyenv init -)"
eval "$(pyenv virtualenv-init -)"

pyenv install 2.7.16
pyenv virtualenv 2.7.1
</pre>
                <b>## PIP INSTALLS</b>
                <pre>
    missing, commented out ######## 
    hachoir-metadata pil pyzmq
    
    pip install -r requirements.txt
    </pre>
    <pre style="color:#ccc">
    pip install django-taggit django-facebook django-celery django-kombu django-paypal django-piston 
    django-storages==1.1.4 django-recaptcha django-cms django-extensions django-rosetta django-tinymce 
    django-nose django-templatetag-handlebars 

    pip install phonenumbers nose pisa reportlab html5lib sorl-thumbnail boto pycrypto pytz xlrd  
    GitPython Paste PasteDeploy bitly_api sphinx tdaemon python-baseconv MySQL-python

    pip install pyjwt==1.7.1
    pip install kombu -U
    pip install django-oauth2-provider==0.2.6.1
</code></pre>
## NPM INSTALLS
<pre>
    cd frontend
    npm install
</pre>
## Loading MySQL DB dump <br>
<code>
    create user 'pf1'@'localhost' IDENTIFIED by 'federer'; <br>
    grant all privileges on *.* to 'pf1'@'localhost';</code> <br><br>
    # Create database using following queries. 
    Note the utf8 charset and utf8_general_ci<br>

<code>
DROP DATABASE IF EXISTS `iphotographe_innodb`;<br>
CREATE DATABASE `iphotographe_innodb` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;<br>
tar -xzOf mysqlfile.tar.gz | mysql -u pf1 -p iphotographe_innodb
</code>
<br><br>
To avoid sending emails by mistake!!
                <pre>
    UPDATE  ecoleimage_com.auth_user SET email=concat(email, "_zzz") 
    WHERE id!=1 AND email NOT LIKE "%_archived35" AND email NOT LIKE "%_zzz";
    47097 rows changed
    
    UPDATE  ecoleimage_com.main_productprovider set email=concat(email, "_zzz") 
    WHERE id!=1 and email not like "%_archived35";
    38 rows changed
    
    UPDATE  ecoleimage_com.main_organization set business_email=concat(business_email, "_zzz") 
    WHERE id!=1 and business_email not like "%_archived35";
    918 rows changed

</pre>
                <br>
                ## RUNNING PIXFIRST on localhost:8020
                <pre>
    get latest 'projects/settings_dev.py'
    update database user & password
    python projects/manage.py runserver localhost:8020

    browse to localhost:8020
    login with &laquo; iphotographe &raquo; & &laquo; 987pixfirst87! &raquo;
    change password for bruno account
    login with &laquo; bruno@compositeurdimage.com_zzz &raquo; & &laquo; NEW_PASSWORD &raquo; to access photographer account
</code>
</pre>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-9 offset-lg-3">
                <h4>Config files</h4>
                <ul>
                    <li>PIXFIRST add these files in local copy
                        <ul>
                            <li>projects/settings_dev.py - update logfile</li>
                            <li>projects/common_settings.py</li>
                            <li>projects/common_settings_override.py</li>
                        </ul>
                    </li>
                    <li>DJANGO PYTHON APP @localhost:8000</li>
                    <li>REACT JS APP @localhost:3000 - make SURE CORS rule is allowing API calls to pixfirst:8000 and pixzen:8080
                        <ul>
                            <li>config @frontend/.env or @frontend/.env.local</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</body>

</html>